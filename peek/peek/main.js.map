{"version":3,"sources":["ws (ignored)","./apps/peek/src/app/room/room.ts","./apps/peek/src/envs/env.ts","./packs/core/peek/src/lib/shared/material.module.ts","./packs/core/model/src/lib/signaling.ts","./apps/peek/src/app/app.module.ts","./packs/core/peek/src/lib/adapters/index.ts","./packs/core/peek/src/lib/shared/index.ts","./packs/core/peek/src/lib/components/to-peer/to-peer.component.ts","./packs/core/peek/src/lib/components/to-peer/to-peer.component.html","./packs/core/peek/src/lib/adapters/media.adapter.ts","./packs/core/model/src/index.ts","./apps/peek/src/main.ts","./packs/core/model/src/lib/code.ts","./packs/core/peek/src/index.ts","./apps/peek/src/app/room/room.component.ts","./apps/peek/src/app/room/room.component.html","./apps/peek/src/app/app-routing.module.ts","./packs/core/model/src/lib/media.ts","./apps/peek/src/app/home/home.component.ts","./apps/peek/src/app/home/home.component.html","./packs/core/model/src/lib/message.ts","./packs/core/model/src/lib/uuid.ts","./packs/core/peek/src/lib/core-peek.module.ts","./packs/core/peek/src/lib/adapters/signaling.adapter.ts","./packs/core/peek/src/lib/components/index.ts","./apps/peek/src/app/app.component.ts","./apps/peek/src/app/app.component.html","./packs/core/model/src/lib/util/code.ts","./apps/peek/$_lazy_route_resource lazy namespace object","./packs/core/model/src/lib/peer-event.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["/* (ignored) */","import { PeerEvent, Signaling } from '@peek/core/model'\nimport { takeUntil } from 'rxjs/operators'\nimport { Subject } from 'rxjs'\nimport { Media } from '@peek/core/model'\nimport { Component } from '@angular/core'\n\n@Component({ template: '' })\nexport class Room {\n  destroy$ = new Subject<void>()\n\n  protected pc: RTCPeerConnection\n  sender: string\n\n  /**\n   * ajuda no controle de estado em\n   * negociações evitando conflitos\n   */\n  makingOffer = false\n  ignoreOffer = false\n  isSettingRemoteAnswerPending = false\n\n  offerOptions: RTCOfferOptions = {\n    offerToReceiveAudio: true,\n    offerToReceiveVideo: true,\n  }\n\n  stream: MediaStream\n\n  selfView: HTMLVideoElement\n  remoteView: HTMLVideoElement\n\n  constructor(protected signaling: Signaling, protected media: Media) {}\n\n  start = async () => {\n    try {\n      if (this.media) {\n        this.stream = await this.media.getUserMedia()\n        for (const track of this.stream.getTracks()) {\n          this.pc.addTrack(track, this.stream)\n        }\n        this.selfView.srcObject = this.stream\n        this.selfView.muted = true\n      }\n    } catch (err) {\n      console.error(err)\n    }\n  }\n\n  async makeOffer(options?: RTCOfferOptions) {\n    try {\n      this.makingOffer = true\n      this.pc.createOffer(options).then((offer) => {\n        const description = new RTCSessionDescription(offer)\n\n        this.pc.setLocalDescription(description)\n\n        this.signaling.send({ sender: this.sender, description })\n      })\n    } catch (err) {\n      console.error(err)\n    } finally {\n      this.makingOffer = false\n    }\n  }\n\n  //  A lógica de negociação perfeita, separada do resto da aplicação\n  afterViewComplete() {\n    // enviar qualquer candidato de gelo para o outro par\n    this.pc.addEventListener('icecandidate', ({ candidate }) => {\n      if (candidate) {\n        this.signaling.send({ sender: this.sender, candidate })\n      }\n    })\n\n    // deixe o evento \"necessário para a negociação\" gerar a oferta\n    this.pc.addEventListener('negotiationneeded', async () => {\n      this.makeOffer(this.offerOptions)\n    })\n\n    this.signaling.message$\n      .pipe(takeUntil(this.destroy$))\n      .subscribe(async ({ sender, description, candidate }) => {\n        console.log('sender: ', sender)\n        try {\n          if (description) {\n            // Uma oferta pode chegar enquanto estamos ocupados processando uma resposta.\n            // Nesse caso, estaremos \"estáveis\" no momento em que a oferta for processada\n            // Sendo assim, apenas a partir disso devemos seguir com nossas operações.\n\n            const readyForOffer =\n              !this.makingOffer &&\n              (this.pc.signalingState == 'stable' ||\n                this.isSettingRemoteAnswerPending)\n\n            // É uma oferta e não está aguardando nada\n            const offerCollision =\n              description.type == PeerEvent.Offer && !readyForOffer\n\n            const polite = sender === this.sender\n\n            this.ignoreOffer = polite && offerCollision\n            if (this.ignoreOffer) {\n              return\n            }\n            this.isSettingRemoteAnswerPending =\n              description.type == PeerEvent.Answer\n\n            await this.pc.setRemoteDescription(description) // SRD reverte conforme necessário\n\n            this.isSettingRemoteAnswerPending = false\n\n            if (description.type == PeerEvent.Offer) {\n              await this.pc.setLocalDescription(await this.pc.createAnswer())\n              if (this.pc.localDescription) {\n                this.signaling.send({ description: this.pc.localDescription })\n              }\n            }\n          } else if (candidate) {\n            try {\n              await this.pc.addIceCandidate(candidate)\n            } catch (err) {\n              if (!this.ignoreOffer) throw err // Suprimir os candidatos da oferta ignorada\n            }\n          }\n        } catch (err) {\n          console.error(err)\n        }\n      })\n  }\n\n  hangup() {\n    console.log('Ending call')\n    this.stream.getTracks().forEach((t) => t.stop())\n    if (this.pc) {\n      this.pc.close()\n      Object.defineProperties(this.pc, {})\n    }\n  }\n\n  ngOnDestroy() {\n    if (this.stream?.active) {\n      this.hangup()\n    }\n    this.destroy$.next()\n    this.destroy$.complete()\n  }\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `env.ts` with `env.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const env = {\n  prod: false,\n  seek: 'http://localhost:3000',\n  constraints: {\n    audio: {\n      channelCount: {\n        ideal: 2,\n      },\n      echoCancellation: true,\n      frameRate: {\n        ideal: 22000,\n      },\n    },\n    video: {\n      width: {\n        min: 480,\n        max: 1280,\n        ideal: 1280,\n      },\n      height: {\n        min: 320,\n        max: 720,\n        ideal: 720,\n      },\n      facingMode: {\n        ideal: 'user',\n      },\n      frameRate: {\n        ideal: 60,\n        min: 10,\n      },\n    },\n  }\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\nimport 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { NgModule } from '@angular/core'\nimport { MatBottomSheetModule } from '@angular/material/bottom-sheet'\nimport { MatFormFieldModule } from '@angular/material/form-field'\nimport { MatButtonModule } from '@angular/material/button'\nimport { MatToolbarModule } from '@angular/material/toolbar'\nimport { MatDialogModule } from '@angular/material/dialog'\nimport { MatInputModule } from '@angular/material/input'\nimport { MatCardModule } from '@angular/material/card'\nimport { MatIconModule } from '@angular/material/icon'\n\n@NgModule({\n  exports: [\n    MatBottomSheetModule,\n    MatFormFieldModule,\n    MatButtonModule,\n    MatToolbarModule,\n    MatDialogModule,\n    MatInputModule,\n    MatCardModule,\n    MatIconModule,\n  ],\n})\nexport class PeekMaterialModule {}\n","import { Observable } from 'rxjs'\n\nexport interface IMessage {\n  description?: RTCSessionDescription\n  candidate?: RTCIceCandidate\n  sender?: string\n}\n\nexport interface ISignaling {\n  message$: Observable<IMessage>\n  send(data: IMessage): void\n}\n\nimport * as io from 'socket.io-client'\nimport { Subject } from 'rxjs'\n\nexport class Signaling implements ISignaling {\n  io!: SocketIOClient.Socket\n\n  private message = new Subject<IMessage>()\n  message$ = this.message.asObservable()\n\n  constructor(uri: string) {\n    if (uri) {\n      this.io = io.connect(uri)\n      this.io.on('message', (evt: IMessage) => this.message.next(evt))\n    }\n  }\n\n  send(data: IMessage): void {\n    this.io.send(data)\n  }\n}\n","import { BrowserAnimationsModule } from '@angular/platform-browser/animations'\nimport { MatSidenavModule } from '@angular/material/sidenav'\nimport { BrowserModule } from '@angular/platform-browser'\nimport { AppRoutingModule } from './app-routing.module'\nimport { ReactiveFormsModule } from '@angular/forms'\nimport { NgModule } from '@angular/core'\nimport { AppComponent } from './app.component'\nimport { RoomComponent } from './room/room.component'\nimport { HomeComponent } from './home/home.component'\nimport { PeekMaterialModule, CorePeekModule } from '@peek/core/peek'\nimport { Signaling, Media } from '@peek/core/model'\nimport {\n  MediaFactory,\n  MEDIA_CONSTRAINTS,\n  SignalingFactory,\n  SIGNALING_CLIENT,\n} from '@peek/core/peek'\nimport { Room } from './room/room'\nimport { env } from '../envs/env'\n\n@NgModule({\n  declarations: [AppComponent, Room, RoomComponent, HomeComponent],\n  imports: [\n    CorePeekModule,\n    BrowserModule,\n    AppRoutingModule,\n    MatSidenavModule,\n    PeekMaterialModule,\n    ReactiveFormsModule,\n    BrowserAnimationsModule,\n  ],\n  providers: [\n    {\n      provide: SIGNALING_CLIENT,\n      useValue: env.seek,\n    },\n    {\n      provide: Signaling,\n      useFactory: SignalingFactory,\n      deps: [SIGNALING_CLIENT],\n    },\n    {\n      provide: MEDIA_CONSTRAINTS,\n      useValue: env.constraints,\n    },\n    {\n      provide: Media,\n      useFactory: MediaFactory,\n      deps: [MEDIA_CONSTRAINTS],\n    },\n  ],\n  bootstrap: [AppComponent],\n})\nexport class AppModule {}\n","export * from './signaling.adapter'\r\nexport * from './media.adapter'\r\n","export * from './material.module';\r\n","import { Component, HostBinding, Input } from '@angular/core'\n\n@Component({\n  selector: 'peek-to-peer',\n  templateUrl: './to-peer.component.html',\n  styleUrls: ['./to-peer.component.scss']\n})\nexport class ToPeerComponent  {\n  private _active: boolean\n\n  @Input('active')\n  public set active(value: boolean) {\n    this._active = value\n  }\n\n  public get active(): boolean {\n    return this._active\n  }\n\n  @HostBinding('class.active')\n  get isCalling() {\n    return this._active\n  }\n}\n","<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"200\" height=\"200\" viewBox=\"0 0 100 100\" preserveAspectRatio=\"xMidYMid\"><circle cx=\"6.452\" cy=\"50\" r=\"3\"><animate attributeName=\"r\" values=\"2.4000000000000004;3.5999999999999996;2.4000000000000004\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-0.5s\"/><animate attributeName=\"cy\" keyTimes=\"0;0.5;1\" values=\"32;68;32\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"0s\" keySplines=\"0.5 0 0.5 1;0.5 0 0.5 1\" calcMode=\"spline\"/><animate attributeName=\"fill\" keyTimes=\"0;0.5;1\" values=\"#ffeb3b;#fff;#0b68ea\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-0.5s\"/></circle><circle cx=\"6.452\" cy=\"50\" r=\"3\" fill=\"#fff\"><animate attributeName=\"r\" values=\"2.4000000000000004;3.5999999999999996;2.4000000000000004\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-1.5s\"/><animate attributeName=\"cy\" keyTimes=\"0;0.5;1\" values=\"32;68;32\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-1s\" keySplines=\"0.5 0 0.5 1;0.5 0 0.5 1\" calcMode=\"spline\"/><animate attributeName=\"fill\" keyTimes=\"0;0.5;1\" values=\"#fff;#ffeb3b;#fff\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-0.5s\"/></circle><circle cx=\"16.129\" cy=\"50\" r=\"3\"><animate attributeName=\"r\" values=\"2.4000000000000004;3.5999999999999996;2.4000000000000004\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-0.7s\"/><animate attributeName=\"cy\" keyTimes=\"0;0.5;1\" values=\"32;68;32\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-0.2s\" keySplines=\"0.5 0 0.5 1;0.5 0 0.5 1\" calcMode=\"spline\"/><animate attributeName=\"fill\" keyTimes=\"0;0.5;1\" values=\"#ffeb3b;#fff;#0b68ea\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-0.7s\"/></circle><circle cx=\"16.129\" cy=\"50\" r=\"3\" fill=\"#fff\"><animate attributeName=\"r\" values=\"2.4000000000000004;3.5999999999999996;2.4000000000000004\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-1.7s\"/><animate attributeName=\"cy\" keyTimes=\"0;0.5;1\" values=\"32;68;32\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-1.2s\" keySplines=\"0.5 0 0.5 1;0.5 0 0.5 1\" calcMode=\"spline\"/><animate attributeName=\"fill\" keyTimes=\"0;0.5;1\" values=\"#fff;#ffeb3b;#fff\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-0.7s\"/></circle><circle cx=\"25.806\" cy=\"50\" r=\"3\"><animate attributeName=\"r\" values=\"2.4000000000000004;3.5999999999999996;2.4000000000000004\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-0.9s\"/><animate attributeName=\"cy\" keyTimes=\"0;0.5;1\" values=\"32;68;32\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-0.4s\" keySplines=\"0.5 0 0.5 1;0.5 0 0.5 1\" calcMode=\"spline\"/><animate attributeName=\"fill\" keyTimes=\"0;0.5;1\" values=\"#ffeb3b;#fff;#0b68ea\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-0.9s\"/></circle><circle cx=\"25.806\" cy=\"50\" r=\"3\" fill=\"#fff\"><animate attributeName=\"r\" values=\"2.4000000000000004;3.5999999999999996;2.4000000000000004\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-1.9s\"/><animate attributeName=\"cy\" keyTimes=\"0;0.5;1\" values=\"32;68;32\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-1.4s\" keySplines=\"0.5 0 0.5 1;0.5 0 0.5 1\" calcMode=\"spline\"/><animate attributeName=\"fill\" keyTimes=\"0;0.5;1\" values=\"#fff;#ffeb3b;#fff\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-0.9s\"/></circle><circle cx=\"35.484\" cy=\"50\" r=\"3\"><animate attributeName=\"r\" values=\"2.4000000000000004;3.5999999999999996;2.4000000000000004\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-1.1s\"/><animate attributeName=\"cy\" keyTimes=\"0;0.5;1\" values=\"32;68;32\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-0.6s\" keySplines=\"0.5 0 0.5 1;0.5 0 0.5 1\" calcMode=\"spline\"/><animate attributeName=\"fill\" keyTimes=\"0;0.5;1\" values=\"#ffeb3b;#fff;#0b68ea\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-1.1s\"/></circle><circle cx=\"35.484\" cy=\"50\" r=\"3\" fill=\"#fff\"><animate attributeName=\"r\" values=\"2.4000000000000004;3.5999999999999996;2.4000000000000004\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-2.1s\"/><animate attributeName=\"cy\" keyTimes=\"0;0.5;1\" values=\"32;68;32\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-1.6s\" keySplines=\"0.5 0 0.5 1;0.5 0 0.5 1\" calcMode=\"spline\"/><animate attributeName=\"fill\" keyTimes=\"0;0.5;1\" values=\"#fff;#ffeb3b;#fff\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-1.1s\"/></circle><circle cx=\"45.161\" cy=\"50\" r=\"3\"><animate attributeName=\"r\" values=\"2.4000000000000004;3.5999999999999996;2.4000000000000004\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-1.3s\"/><animate attributeName=\"cy\" keyTimes=\"0;0.5;1\" values=\"32;68;32\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-0.8s\" keySplines=\"0.5 0 0.5 1;0.5 0 0.5 1\" calcMode=\"spline\"/><animate attributeName=\"fill\" keyTimes=\"0;0.5;1\" values=\"#ffeb3b;#fff;#0b68ea\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-1.3s\"/></circle><circle cx=\"45.161\" cy=\"50\" r=\"3\" fill=\"#fff\"><animate attributeName=\"r\" values=\"2.4000000000000004;3.5999999999999996;2.4000000000000004\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-2.3s\"/><animate attributeName=\"cy\" keyTimes=\"0;0.5;1\" values=\"32;68;32\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-1.8s\" keySplines=\"0.5 0 0.5 1;0.5 0 0.5 1\" calcMode=\"spline\"/><animate attributeName=\"fill\" keyTimes=\"0;0.5;1\" values=\"#fff;#ffeb3b;#fff\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-1.3s\"/></circle><circle cx=\"54.839\" cy=\"50\" r=\"3\"><animate attributeName=\"r\" values=\"2.4000000000000004;3.5999999999999996;2.4000000000000004\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-1.5s\"/><animate attributeName=\"cy\" keyTimes=\"0;0.5;1\" values=\"32;68;32\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-1s\" keySplines=\"0.5 0 0.5 1;0.5 0 0.5 1\" calcMode=\"spline\"/><animate attributeName=\"fill\" keyTimes=\"0;0.5;1\" values=\"#ffeb3b;#fff;#0b68ea\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-1.5s\"/></circle><circle cx=\"54.839\" cy=\"50\" r=\"3\" fill=\"#fff\"><animate attributeName=\"r\" values=\"2.4000000000000004;3.5999999999999996;2.4000000000000004\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-2.5s\"/><animate attributeName=\"cy\" keyTimes=\"0;0.5;1\" values=\"32;68;32\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-2s\" keySplines=\"0.5 0 0.5 1;0.5 0 0.5 1\" calcMode=\"spline\"/><animate attributeName=\"fill\" keyTimes=\"0;0.5;1\" values=\"#fff;#ffeb3b;#fff\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-1.5s\"/></circle><circle cx=\"64.516\" cy=\"50\" r=\"3\"><animate attributeName=\"r\" values=\"2.4000000000000004;3.5999999999999996;2.4000000000000004\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-1.7s\"/><animate attributeName=\"cy\" keyTimes=\"0;0.5;1\" values=\"32;68;32\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-1.2s\" keySplines=\"0.5 0 0.5 1;0.5 0 0.5 1\" calcMode=\"spline\"/><animate attributeName=\"fill\" keyTimes=\"0;0.5;1\" values=\"#ffeb3b;#fff;#0b68ea\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-1.7s\"/></circle><circle cx=\"64.516\" cy=\"50\" r=\"3\" fill=\"#fff\"><animate attributeName=\"r\" values=\"2.4000000000000004;3.5999999999999996;2.4000000000000004\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-2.7s\"/><animate attributeName=\"cy\" keyTimes=\"0;0.5;1\" values=\"32;68;32\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-2.2s\" keySplines=\"0.5 0 0.5 1;0.5 0 0.5 1\" calcMode=\"spline\"/><animate attributeName=\"fill\" keyTimes=\"0;0.5;1\" values=\"#fff;#ffeb3b;#fff\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-1.7s\"/></circle><circle cx=\"74.194\" cy=\"50\" r=\"3\"><animate attributeName=\"r\" values=\"2.4000000000000004;3.5999999999999996;2.4000000000000004\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-1.9s\"/><animate attributeName=\"cy\" keyTimes=\"0;0.5;1\" values=\"32;68;32\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-1.4s\" keySplines=\"0.5 0 0.5 1;0.5 0 0.5 1\" calcMode=\"spline\"/><animate attributeName=\"fill\" keyTimes=\"0;0.5;1\" values=\"#ffeb3b;#fff;#0b68ea\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-1.9s\"/></circle><circle cx=\"74.194\" cy=\"50\" r=\"3\" fill=\"#fff\"><animate attributeName=\"r\" values=\"2.4000000000000004;3.5999999999999996;2.4000000000000004\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-2.9s\"/><animate attributeName=\"cy\" keyTimes=\"0;0.5;1\" values=\"32;68;32\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-2.4s\" keySplines=\"0.5 0 0.5 1;0.5 0 0.5 1\" calcMode=\"spline\"/><animate attributeName=\"fill\" keyTimes=\"0;0.5;1\" values=\"#fff;#ffeb3b;#fff\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-1.9s\"/></circle><circle cx=\"83.871\" cy=\"50\" r=\"3\"><animate attributeName=\"r\" values=\"2.4000000000000004;3.5999999999999996;2.4000000000000004\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-2.1s\"/><animate attributeName=\"cy\" keyTimes=\"0;0.5;1\" values=\"32;68;32\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-1.6s\" keySplines=\"0.5 0 0.5 1;0.5 0 0.5 1\" calcMode=\"spline\"/><animate attributeName=\"fill\" keyTimes=\"0;0.5;1\" values=\"#ffeb3b;#fff;#0b68ea\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-2.1s\"/></circle><circle cx=\"83.871\" cy=\"50\" r=\"3\" fill=\"#fff\"><animate attributeName=\"r\" values=\"2.4000000000000004;3.5999999999999996;2.4000000000000004\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-3.1s\"/><animate attributeName=\"cy\" keyTimes=\"0;0.5;1\" values=\"32;68;32\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-2.6s\" keySplines=\"0.5 0 0.5 1;0.5 0 0.5 1\" calcMode=\"spline\"/><animate attributeName=\"fill\" keyTimes=\"0;0.5;1\" values=\"#fff;#ffeb3b;#fff\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-2.1s\"/></circle><circle cx=\"93.548\" cy=\"50\" r=\"3\"><animate attributeName=\"r\" values=\"2.4000000000000004;3.5999999999999996;2.4000000000000004\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-2.3s\"/><animate attributeName=\"cy\" keyTimes=\"0;0.5;1\" values=\"32;68;32\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-1.8s\" keySplines=\"0.5 0 0.5 1;0.5 0 0.5 1\" calcMode=\"spline\"/><animate attributeName=\"fill\" keyTimes=\"0;0.5;1\" values=\"#ffeb3b;#fff;#0b68ea\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-2.3s\"/></circle><circle cx=\"93.548\" cy=\"50\" r=\"3\" fill=\"#fff\"><animate attributeName=\"r\" values=\"2.4000000000000004;3.5999999999999996;2.4000000000000004\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-3.3s\"/><animate attributeName=\"cy\" keyTimes=\"0;0.5;1\" values=\"32;68;32\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-2.8s\" keySplines=\"0.5 0 0.5 1;0.5 0 0.5 1\" calcMode=\"spline\"/><animate attributeName=\"fill\" keyTimes=\"0;0.5;1\" values=\"#fff;#ffeb3b;#fff\" dur=\"2.4s\" repeatCount=\"indefinite\" begin=\"-2.3s\"/></circle></svg>\n","import { InjectionToken } from '@angular/core'\nimport { Media } from '@peek/core/model'\n\nexport function MediaFactory(uri: MediaStreamConstraints) {\n  return new Media(uri)\n}\n\nexport const MEDIA_CONSTRAINTS = new InjectionToken<MediaStreamConstraints>(\n  'MediaConstraints'\n)\n","export * from './lib/peer-event'\nexport * from './lib/signaling'\nexport * from './lib/util/code'\nexport * from './lib/payload'\nexport * from './lib/message'\nexport * from './lib/media'\nexport * from './lib/code'\nexport * from './lib/uuid'\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { env } from './envs/env';\n\nif (env.prod) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic()\n  .bootstrapModule(AppModule)\n  .catch((err) => console.error(err));\n","export class Code {\n  uid: string[]\n  constructor(code: string) {\n    this.uid = code.split('-')\n  }\n}\n","export * from './lib/core-peek.module'\nexport * from './lib/components'\nexport * from './lib/adapters'\nexport * from './lib/shared'\n","import {\n  AfterViewInit,\n  Component,\n  ElementRef,\n  OnDestroy,\n  ViewChild,\n} from '@angular/core'\nimport { Subject } from 'rxjs'\nimport { Room } from './room'\nimport { Media, Signaling, uuid } from '@peek/core/model'\n\n@Component({\n  selector: 'peek-room',\n  templateUrl: './room.component.html',\n  styleUrls: ['./room.component.scss'],\n})\nexport class RoomComponent extends Room implements AfterViewInit, OnDestroy {\n  active = new Subject<boolean>()\n  active$ = this.active.asObservable()\n\n  @ViewChild('selfView') selfViewRef: ElementRef<HTMLVideoElement>\n\n  @ViewChild('remoteView') remoteViewRef: ElementRef<HTMLVideoElement>\n\n  constructor(protected signaling: Signaling, protected media: Media) {\n    super(signaling, media)\n  }\n\n  restart = async () => {\n    this.offerOptions.iceRestart = true\n    this.makeOffer(this.offerOptions)\n  }\n\n  ngAfterViewInit() {\n    this.sender = uuid()\n    this.selfView = this.selfViewRef.nativeElement\n    this.remoteView = this.remoteViewRef.nativeElement\n\n    this.pc = new RTCPeerConnection({\n      iceServers: [{ urls: 'stun:stun.stunprotocol.org:3478' }],\n    })\n\n    this.pc.addEventListener('track', ({ track, streams }) => {\n      // assim que a mídia remota chegar,\n      // mostre-a no elemento de vídeo remoto\n      track.addEventListener('unmute', async () => {\n        // não defina srcObject caso já esteja definido.\n        if (this.remoteView.srcObject) return\n        this.remoteView.srcObject = streams[0]\n        this.active.next(true)\n      })\n    })\n\n    this.afterViewComplete()\n\n    this.start()\n  }\n  end() {\n    this.active.next(false)\n    this.hangup()\n  }\n}\n","<div class=\"center\" *ngIf=\"(active$ | async) === null\">\n  <peek-to-peer #calling [active]=\"(active$ | async) === true\"></peek-to-peer>\n</div>\n<div id=\"remote\" [ngClass]=\"{\n  'call-start': (active$ | async) === true,\n  'call-end': (active$ | async) === false\n}\">\n  <video #remoteView autoplay></video>\n</div>\n<mat-card id=\"local\" class=\"mat-elevation-z2\">\n  <video #selfView autoplay muted></video>\n</mat-card>\n<button type=\"button\" mat-fab color=\"warn\" (click)=\"end()\">\n  <mat-icon>call_end</mat-icon>\n</button>\n","import { NgModule } from '@angular/core'\nimport { RouterModule } from '@angular/router'\nimport { HomeComponent } from './home/home.component'\nimport { RoomComponent } from './room/room.component'\n\n@NgModule({\n  imports: [\n    RouterModule.forRoot(\n      [\n        { path: '', pathMatch: 'full', redirectTo: 'home' },\n        { path: 'home', component: HomeComponent },\n        { path: 'room', component: RoomComponent },\n        { path: 'room/:code', component: RoomComponent },\n      ],\n      {\n        initialNavigation: 'enabled',\n        relativeLinkResolution: 'legacy',\n      }\n    ),\n  ],\n  exports: [RouterModule],\n})\nexport class AppRoutingModule {}\n","export class Media {\n  constructor(public constraints: MediaStreamConstraints) {}\n\n  getUserMedia(constraints?: MediaStreamConstraints) {\n    return navigator.mediaDevices.getUserMedia(\n      constraints ? constraints : this.constraints\n    )\n  }\n\n  async getDevices(deviceKind?: MediaDeviceKind) {\n    const filter = ({ kind }: MediaDeviceInfo) => kind === deviceKind\n    const devices = await navigator.mediaDevices.enumerateDevices()\n    return deviceKind ? devices.filter(filter) : devices\n  }\n\n  getDisplayMedia(): Promise<MediaStream> {\n    const configuration = { video: true }\n    const mediaDevices = navigator.mediaDevices\n    if ('getDisplayMedia' in navigator) {\n      return (navigator as any).getDisplayMedia(configuration)\n    } else if ('getDisplayMedia' in mediaDevices) {\n      return (mediaDevices as any).getDisplayMedia(configuration)\n    } else {\n      return mediaDevices.getUserMedia({\n        video: { mediaSourcee: 'screen' },\n      } as MediaStreamConstraints)\n    }\n  }\n}\n","import { Component } from '@angular/core'\n\n@Component({\n  selector: 'peek-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.scss'],\n})\nexport class HomeComponent {}\n","<figure class=\"home\">\n  <img src=\"assets/images/logo.svg\" alt=\"\">\n</figure>\n\n<mat-toolbar>\n  <button mat-raised-button disabled color=\"accent\">\n    Usar código <small>(breve)</small>\n  </button>\n  <a mat-flat-button color=\"primary\" routerLink=\"/room\">\n    Acessar\n  </a>\n</mat-toolbar>\n","import { Payload } from './payload'\n\nexport class Message implements Payload {\n  sender?: string\n  candidate?: RTCIceCandidate\n  description?: RTCSessionDescription\n\n  constructor({ sender, description, candidate }: Payload) {\n    this.sender = sender\n    this.candidate = candidate\n    this.description = description\n  }\n}\n","export function uuid(): string {\n  function S4(): string {\n    return Math.floor((1 + Math.random()) * 0x10000)\n      .toString(16)\n      .substring(1)\n  }\n\n  return `${S4()}${S4()}-${S4()}-${S4()}-${S4()}-${S4()}${S4()}${S4()}`\n}\n","import { NgModule } from '@angular/core'\nimport { CommonModule } from '@angular/common';\nimport { ToPeerComponent } from './components/to-peer/to-peer.component'\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [ToPeerComponent],\n  exports: [ToPeerComponent],\n})\nexport class CorePeekModule {}\n","import { InjectionToken } from '@angular/core'\nimport { Signaling } from '@peek/core/model'\n\nexport function SignalingFactory(uri: string) {\n  return new Signaling(uri)\n}\n\nexport const SIGNALING_CLIENT = new InjectionToken<string>('Signaling')\n","export * from './to-peer/to-peer.component'\r\n","import { Component } from '@angular/core'\n\n@Component({\n  selector: 'peek-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss'],\n})\nexport class AppComponent {\n  title = 'peek'\n  constructor() {}\n}\n","<mat-drawer-container class=\"peek-container\" [hasBackdrop]=\"true\" autosize>\n\n  <mat-drawer #drawer class=\"peek-sidenav\" mode=\"over\" role=\"navigation\">\n    <p>Auto-resizing sidenav</p>\n  </mat-drawer>\n\n  <div class=\"peek-content\">\n\n    <mat-toolbar role=\"banner\">\n      <a mat-icon-button routerLink=\"/\">\n        <mat-icon>home</mat-icon>\n      </a>\n      <h1 role=\"logo\">Welcome to {{ title }}!</h1>\n    </mat-toolbar>\n\n    <main role=\"contentinfo\">\n      <router-outlet></router-outlet>\n    </main>\n\n  </div>\n\n</mat-drawer-container>\n","export function code(): string {\n  function S4(): string {\n    return Math.floor((1 + Math.random()) * 0x10000)\n      .toString(16)\n      .substring(1)\n  }\n\n  return `${S4()}${S4()}-${S4()}-${S4()}`\n}\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"um+W\";","export enum PeerEvent {\n  Connect = 'connect',\n  Disconnect = 'disconnect',\n  Connected = 'connected',\n  Completed = 'completed',\n  Offer = 'offer',\n  Answer = 'answer',\n  Aloha = 'aloha'\n}\n"],"sourceRoot":"webpack:///"}